import React, { useState } from 'react';
import { Copy, Sparkles, Video, Wand2, Check } from 'lucide-react';

export default function Sora2PromptGenerator() {
  const [copied, setCopied] = useState(false);
  const [formData, setFormData] = useState({
    style: '',
    overview: '',
    subject: '',
    environment: '',
    action: '',
    camera: '',
    lighting: '',
    mood: '',
    duration: '5',
    audio: ''
  });

  const [generatedPrompt, setGeneratedPrompt] = useState('');

  const styleOptions = [
    '시네마틱 영화',
    '3D 애니메이션',
    '영화 예고편',
    '다큐멘터리',
    '뮤직비디오',
    '광고 영상',
    '드론 촬영',
    '타임랩스',
    '슬로우 모션',
    '빈티지 필름'
  ];

  const cameraOptions = [
    '와이드 샷',
    '클로즈업',
    '추적 샷',
    '오버헤드 뷰',
    '1인칭 시점',
    '드론 샷',
    '핸드헬드',
    '스테디캠',
    '달리 줌',
    '360도 회전'
  ];

  const lightingOptions = [
    '골든 아워',
    '블루 아워',
    '네온 조명',
    '자연광',
    '극적인 백라이트',
    '소프트 박스',
    '림 라이팅',
    '실루엣',
    '촛불 조명',
    '스튜디오 조명'
  ];

  const moodOptions = [
    '신비로운',
    '긴장감 있는',
    '평화로운',
    '활기찬',
    '우울한',
    '로맨틱한',
    '서사적인',
    '향수를 자극하는',
    '미래적인',
    '몽환적인'
  ];

  const handleChange = (field, value) => {
    setFormData(prev => ({ ...prev, [field]: value }));
  };

  const generatePrompt = () => {
    const parts = [];
    
    // 스타일
    if (formData.style) {
      parts.push(`[Style: ${formData.style}]`);
    }
    
    // 장면 개요
    if (formData.overview) {
      parts.push(`${formData.overview}.`);
    }
    
    // 주체/캐릭터
    if (formData.subject) {
      parts.push(`The scene features ${formData.subject}.`);
    }
    
    // 환경/배경
    if (formData.environment) {
      parts.push(`Set in ${formData.environment}.`);
    }
    
    // 행동/움직임
    if (formData.action) {
      parts.push(`The subject ${formData.action}.`);
    }
    
    // 카메라 워크
    if (formData.camera) {
      parts.push(`Shot with ${formData.camera.toLowerCase()}.`);
    }
    
    // 조명
    if (formData.lighting) {
      parts.push(`Lit with ${formData.lighting.toLowerCase()}.`);
    }
    
    // 분위기
    if (formData.mood) {
      parts.push(`The overall mood is ${formData.mood.toLowerCase()}.`);
    }
    
    // 오디오
    if (formData.audio) {
      parts.push(`Audio: ${formData.audio}.`);
    }
    
    // 시간
    parts.push(`Duration: ${formData.duration} seconds.`);
    
    const prompt = parts.join(' ');
    setGeneratedPrompt(prompt);
  };

  const copyToClipboard = async () => {
    try {
      await navigator.clipboard.writeText(generatedPrompt);
      setCopied(true);
      setTimeout(() => setCopied(false), 2000);
    } catch (err) {
      console.error('복사 실패:', err);
    }
  };

  const resetForm = () => {
    setFormData({
      style: '',
      overview: '',
      subject: '',
      environment: '',
      action: '',
      camera: '',
      lighting: '',
      mood: '',
      duration: '5',
      audio: ''
    });
    setGeneratedPrompt('');
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 p-4">
      <div className="max-w-6xl mx-auto">
        {/* 헤더 */}
        <div className="text-center mb-8 pt-8">
          <div className="flex items-center justify-center gap-3 mb-4">
            <Video className="w-12 h-12 text-purple-300" />
            <h1 className="text-4xl font-bold text-white">Sora 2 프롬프트 생성기</h1>
          </div>
          <p className="text-purple-200 text-lg">OpenAI Sora 2용 전문 영상 제작 프롬프트를 생성합니다</p>
        </div>

        <div className="grid md:grid-cols-2 gap-6">
          {/* 입력 폼 */}
          <div className="bg-white/10 backdrop-blur-lg rounded-2xl p-6 shadow-2xl">
            <h2 className="text-2xl font-bold text-white mb-6 flex items-center gap-2">
              <Wand2 className="w-6 h-6" />
              영상 구성 요소
            </h2>

            <div className="space-y-4 max-h-[70vh] overflow-y-auto pr-2">
              {/* 스타일 */}
              <div>
                <label className="block text-purple-200 font-semibold mb-2">
                  전체 스타일/형식 *
                </label>
                <select
                  value={formData.style}
                  onChange={(e) => handleChange('style', e.target.value)}
                  className="w-full bg-white/20 text-white border border-purple-300/30 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-purple-400"
                >
                  <option value="">스타일 선택</option>
                  {styleOptions.map(opt => (
                    <option key={opt} value={opt} className="bg-gray-800">{opt}</option>
                  ))}
                </select>
              </div>

              {/* 장면 개요 */}
              <div>
                <label className="block text-purple-200 font-semibold mb-2">
                  장면 개요 *
                </label>
                <input
                  type="text"
                  value={formData.overview}
                  onChange={(e) => handleChange('overview', e.target.value)}
                  placeholder="예: A stunning aerial view of a futuristic city at sunset"
                  className="w-full bg-white/20 text-white placeholder-purple-300/50 border border-purple-300/30 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-purple-400"
                />
              </div>

              {/* 주체/캐릭터 */}
              <div>
                <label className="block text-purple-200 font-semibold mb-2">
                  주체/캐릭터
                </label>
                <textarea
                  value={formData.subject}
                  onChange={(e) => handleChange('subject', e.target.value)}
                  placeholder="예: a young woman in her 30s wearing a flowing red dress, with long dark hair, smiling confidently"
                  className="w-full bg-white/20 text-white placeholder-purple-300/50 border border-purple-300/30 rounded-lg px-4 py-2 h-20 focus:outline-none focus:ring-2 focus:ring-purple-400"
                />
              </div>

              {/* 환경/배경 */}
              <div>
                <label className="block text-purple-200 font-semibold mb-2">
                  환경/배경
                </label>
                <textarea
                  value={formData.environment}
                  onChange={(e) => handleChange('environment', e.target.value)}
                  placeholder="예: a bustling Tokyo street at night, with bright neon signs, light rain creating reflections"
                  className="w-full bg-white/20 text-white placeholder-purple-300/50 border border-purple-300/30 rounded-lg px-4 py-2 h-20 focus:outline-none focus:ring-2 focus:ring-purple-400"
                />
              </div>

              {/* 행동/움직임 */}
              <div>
                <label className="block text-purple-200 font-semibold mb-2">
                  행동/움직임
                </label>
                <input
                  type="text"
                  value={formData.action}
                  onChange={(e) => handleChange('action', e.target.value)}
                  placeholder="예: walks slowly toward the camera, turning to look at the city lights"
                  className="w-full bg-white/20 text-white placeholder-purple-300/50 border border-purple-300/30 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-purple-400"
                />
              </div>

              {/* 카메라 워크 */}
              <div>
                <label className="block text-purple-200 font-semibold mb-2">
                  카메라 워크
                </label>
                <select
                  value={formData.camera}
                  onChange={(e) => handleChange('camera', e.target.value)}
                  className="w-full bg-white/20 text-white border border-purple-300/30 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-purple-400"
                >
                  <option value="">카메라 앵글 선택</option>
                  {cameraOptions.map(opt => (
                    <option key={opt} value={opt} className="bg-gray-800">{opt}</option>
                  ))}
                </select>
              </div>

              {/* 조명 */}
              <div>
                <label className="block text-purple-200 font-semibold mb-2">
                  조명
                </label>
                <select
                  value={formData.lighting}
                  onChange={(e) => handleChange('lighting', e.target.value)}
                  className="w-full bg-white/20 text-white border border-purple-300/30 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-purple-400"
                >
                  <option value="">조명 스타일 선택</option>
                  {lightingOptions.map(opt => (
                    <option key={opt} value={opt} className="bg-gray-800">{opt}</option>
                  ))}
                </select>
              </div>

              {/* 분위기 */}
              <div>
                <label className="block text-purple-200 font-semibold mb-2">
                  분위기/무드
                </label>
                <select
                  value={formData.mood}
                  onChange={(e) => handleChange('mood', e.target.value)}
                  className="w-full bg-white/20 text-white border border-purple-300/30 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-purple-400"
                >
                  <option value="">분위기 선택</option>
                  {moodOptions.map(opt => (
                    <option key={opt} value={opt} className="bg-gray-800">{opt}</option>
                  ))}
                </select>
              </div>

              {/* 오디오 */}
              <div>
                <label className="block text-purple-200 font-semibold mb-2">
                  오디오/사운드
                </label>
                <input
                  type="text"
                  value={formData.audio}
                  onChange={(e) => handleChange('audio', e.target.value)}
                  placeholder="예: ambient city sounds, soft jazz music in the background"
                  className="w-full bg-white/20 text-white placeholder-purple-300/50 border border-purple-300/30 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-purple-400"
                />
              </div>

              {/* 시간 */}
              <div>
                <label className="block text-purple-200 font-semibold mb-2">
                  영상 길이 (초)
                </label>
                <input
                  type="number"
                  min="1"
                  max="20"
                  value={formData.duration}
                  onChange={(e) => handleChange('duration', e.target.value)}
                  className="w-full bg-white/20 text-white border border-purple-300/30 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-purple-400"
                />
              </div>
            </div>

            <div className="flex gap-3 mt-6">
              <button
                onClick={generatePrompt}
                className="flex-1 bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold py-3 px-6 rounded-lg hover:from-purple-600 hover:to-pink-600 transition-all shadow-lg flex items-center justify-center gap-2"
              >
                <Sparkles className="w-5 h-5" />
                프롬프트 생성
              </button>
              <button
                onClick={resetForm}
                className="bg-white/20 text-white font-bold py-3 px-6 rounded-lg hover:bg-white/30 transition-all"
              >
                초기화
              </button>
            </div>
          </div>

          {/* 결과 표시 */}
          <div className="bg-white/10 backdrop-blur-lg rounded-2xl p-6 shadow-2xl">
            <h2 className="text-2xl font-bold text-white mb-6 flex items-center gap-2">
              <Sparkles className="w-6 h-6" />
              생성된 프롬프트
            </h2>

            {generatedPrompt ? (
              <div className="space-y-4">
                <div className="bg-gray-900/50 rounded-lg p-6 min-h-[400px] max-h-[60vh] overflow-y-auto">
                  <p className="text-white leading-relaxed whitespace-pre-wrap">
                    {generatedPrompt}
                  </p>
                </div>

                <button
                  onClick={copyToClipboard}
                  className={`w-full font-bold py-3 px-6 rounded-lg transition-all shadow-lg flex items-center justify-center gap-2 ${
                    copied
                      ? 'bg-green-500 text-white'
                      : 'bg-gradient-to-r from-blue-500 to-cyan-500 text-white hover:from-blue-600 hover:to-cyan-600'
                  }`}
                >
                  {copied ? (
                    <>
                      <Check className="w-5 h-5" />
                      복사 완료!
                    </>
                  ) : (
                    <>
                      <Copy className="w-5 h-5" />
                      클립보드에 복사
                    </>
                  )}
                </button>

                <div className="bg-yellow-500/20 border border-yellow-500/50 rounded-lg p-4">
                  <p className="text-yellow-200 text-sm">
                    💡 <strong>다음 단계:</strong> 위 버튼을 클릭하여 프롬프트를 복사한 후, 
                    <a 
                      href="https://sora.chatgpt.com/explore" 
                      target="_blank" 
                      rel="noopener noreferrer"
                      className="underline hover:text-yellow-100 ml-1"
                    >
                      Sora 2 웹사이트
                    </a>
                    에서 프롬프트 입력창에 붙여넣어 주세요.
                  </p>
                </div>
              </div>
            ) : (
              <div className="flex flex-col items-center justify-center h-[400px] text-purple-300">
                <Video className="w-24 h-24 mb-4 opacity-50" />
                <p className="text-lg">왼쪽 폼을 작성하고 '프롬프트 생성' 버튼을 클릭하세요</p>
              </div>
            )}
          </div>
        </div>

        {/* 사용 가이드 */}
        <div className="mt-8 bg-white/10 backdrop-blur-lg rounded-2xl p-6 shadow-2xl">
          <h3 className="text-xl font-bold text-white mb-4">📖 사용 가이드</h3>
          <div className="grid md:grid-cols-3 gap-4 text-purple-200">
            <div className="bg-white/5 rounded-lg p-4">
              <div className="text-2xl font-bold text-purple-300 mb-2">1</div>
              <p className="font-semibold mb-2">영상 구성 요소 입력</p>
              <p className="text-sm">스타일, 장면, 캐릭터, 환경 등을 상세하게 작성하세요</p>
            </div>
            <div className="bg-white/5 rounded-lg p-4">
              <div className="text-2xl font-bold text-purple-300 mb-2">2</div>
              <p className="font-semibold mb-2">프롬프트 생성 및 복사</p>
              <p className="text-sm">생성 버튼을 클릭하고 결과를 클립보드에 복사하세요</p>
            </div>
            <div className="bg-white/5 rounded-lg p-4">
              <div className="text-2xl font-bold text-purple-300 mb-2">3</div>
              <p className="font-semibold mb-2">Sora 2에 붙여넣기</p>
              <p className="text-sm">Sora 2 웹사이트에 로그인 후 프롬프트를 붙여넣으세요</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}
